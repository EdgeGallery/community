## EdgeGallery安全设计（release-v0.9）

##规则1 识别，认证和授权

### 1.1 所有用于跨网络传输的机器对机器和人对机器接口都必须具有访问认证机制，并且认证过程必须在服务器上执行。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.1  所有用于跨网络传输的机器对机器和人对机器接口都必须具有访问认证机制，并且认证过程必须在服务器上执行。<br>注意：跨网络接口必须支持身份验证，以防止欺骗访问。              |
| 实施细节   | **代填**  |
| 相关API          | User-mgmt为其他平台提供认证鉴权，用户名和密码校验生成jwt token,https单向认证，用户角色权限管理，认证过程在服务器端，Appstore/Developer/MECM所有人机接口提供token认证，https访问<br>【**机机接口**】从dev上传csar包到app，mecm从app拉取csar包，具有认证机制|
| API有效负载示例     | 机机接口样例（待确定）：<br>{    <br>    "authInfo":{<br>        "credentials":{<br>            "accessKeyId":"QVUJMSUMgS0VZLS0tLS0",<br>           "secretKey":"DXPb4sE1KhcHe07Kw5uorayETwId1JOjjOIRomRs5wyszoCR5R7AtVa28KT31Sc"<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;          }<br>    &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>}<br>人机接口：<br>xxx|
| 相关文件           | 不涉及 |
| 相关GUI URL        |                           |
| GUI测试步骤      | 1.在浏览器输入GUI URL<br>2.输入正确的用户名、密码，拖动验证条，完成验证,点击登录<br>3.进入某一模块（usermgmt或者appstore或者developer或者mecm）首页，F12，查看访问方式为https单向访问，经服务器端已生成token |
| GUI输入示例       | Provie the example parameter to input in the GUI             |
| 附加信息         | 不涉及 |
### 1.2 对于每个需要授权的访问请求，服务器必须验证用户是否被授权执行此操作。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.2  对于每个需要授权的访问请求，服务器必须验证用户是否被授权执行此操作             |
| 实施细节   | **代填**  |
| 相关API          | |
| API有效负载示例     | |
| 相关文件           | 不涉及 |
| 相关GUI URL        |                           |
| GUI测试步骤      | |
| GUI输入示例       |             |
| 附加信息         | 不涉及 |
### 1.3 服务器必须验证所有不受信任的数据源的大小，类型，长度和特殊字符，并拒绝所有未通过验证的数据。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.3 服务器必须验证所有不受信任的数据源的大小，类型，长度和特殊字符，并拒绝所有未通过验证的数据              |
| 实施细节   | **dd**  |
| 相关API          | |
| API有效负载示例     | |
| 相关文件           | 不涉及 |
| 相关GUI URL        |                           |
| GUI测试步骤      | |
| GUI输入示例       |             |
| 附加信息         | 不涉及 |
### 1.4 禁止在绕过系统安全机制的同时允许访问系统或数据的功能（例如身份验证、权限控制和日志记录）。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.4  禁止在绕过系统安全机制的同时允许访问系统或数据的功能（例如身份验证、权限控制和日志记录）            |
| 实施细节   | **dd**  |
| 相关API          | |
| API有效负载示例     | |
| 相关文件           | 不涉及 |
| 相关GUI URL        |                           |
| GUI测试步骤      | |
| GUI输入示例       |             |
| 附加信息         | 不涉及 |
### 1.5 根据最小特权原则，用于运行软件程序的帐户是低特权OS帐户。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.5 根据最小特权原则，用于运行软件程序的帐户是低特权OS帐户             |
| 实施细节   |   **ss**|
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | **当前未处理，需要创建非root用户启动app/dev/mecm服务** |
### 1.6 可能重新获得对帐户的访问权限的帐户身份验证功能（例如更新配置文件，忘记密码，禁用/丢失的令牌，帮助台或IVR）,至少具有与主要身份验证机制相同的抵抗能力。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.6 可能重新获得对帐户的访问权限的帐户身份验证功能（例如更新配置文件，忘记密码，禁用/丢失的令牌，帮助台或IVR）,至少具有与主要身份验证机制相同的抵抗能力。             |
| 实施细节   | **ss**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 1.7 所有身份验证控件必须安全失败。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.7 所有身份验证控件必须安全失败。<br>注意:开发人员必须正确处理错误消息的显示             |
| 实施细节   | 所有身份验证控件必须安全失败。<br>注意:开发人员必须正确处理错误消息的显示。  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | **当前未处理，需要创建非root用户启动app/dev/mecm服务** |
### 1.8 忘记的密码功能和其他恢复路径不应泄露当前密码，新密码也不应以明文形式发送给用户。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.8 忘记的密码功能和其他恢复路径不应泄露当前密码，新密码也不应以明文形式发送给用户。             |
| 实施细节   | 忘记的密码功能和其他恢复路径不应泄露当前密码，新密码也不应以明文形式发送给用户  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | **当前未处理，需要创建非root用户启动app/dev/mecm服务** |
### 1.9 更改密码功能必须包括旧密码、新密码和密码确认。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.9 更改密码功能必须包括旧密码、新密码和密码确认。             |
| 实施细节   | 更改密码功能必须包括旧密码、新密码和密码确认  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 1.10 确认已采取措施阻止使用的常用的密码和弱密码短语。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 1.10  确认已采取措施阻止使用的常用的密码和弱密码短语。             |
| 实施细节   | 确认已采取措施阻止使用的常用的密码和弱密码短语  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | **已处理：密码复杂度校验** |
##规则2 安全传输
### 2.1 敏感数据（包括密码）或关键服务数据（网络结构，模型参数）必须使用安全传输协议在网络上传输，或者在传输之前进行加密。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 2.1  敏感数据（包括密码）或关键服务数据（网络结构，模型参数）必须使用安全传输协议在网络上传输，或者在传输之前进行加密。注意：数据跨网络传输时，很容易受到攻击者的窃取和篡改，因此必须保护重要数据。            |
| 实施细节   | 所有接口采用https单向认证  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | **已处理：密码复杂度校验** |
### 2.2 请勿使用SSL2.0，SSL3.0，TLS1.0或者TLS1.1进行安全传输。建议使用TLS1.2和TLS1.3。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 2.2  请勿使用SSL2.0，SSL3.0，TLS1.0或者TLS1.1进行安全传输。建议使用TLS1.2和TLS1.3。            |
| 实施细节   | **目前开启了SSL协议，但是未做版本限制**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 2.3 必须启用并配置适当的证书吊销，例如在线证书状态协议（OCSP）装订。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 2.3 必须启用并配置适当的证书吊销，例如在线证书状态协议（OCSP）装订。            |
| 实施细节   | **目前版本未做证书管理功能，不涉及吊销功能**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则3 敏感和私有数据保护
### 3.1 身份验证凭据（例如密码和密钥）不能以纯文本格式存储在系统中，必须进行加密。如果不需要恢复纯文本，请使用不可逆的PBKDF2算法进行加密。如果需要恢复纯文本，则可以使用AES-256 GCM算法进行加密。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.1 身份验证凭据（例如密码和密钥）不能以纯文本格式存储在系统中，必须进行加密。如果不需要恢复纯文本，请使用不可逆的PBKDF2算法进行加密。如果需要恢复纯文本，则可以使用AES-256 GCM算法进行加密。            |
| 实施细节   | **user-mgmt启动时，jwt公钥、私钥和私钥密码通过环境变量传入，用户密码使用不可逆加密存储，数据库密码和redis密码是通过环境变量的明文传入的，不存在用户通过配置文件导入密码的场景**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 3.2 避免将密码存储在易于访问的位置。考虑存储密码的加密哈希，以替代纯文本格式存储。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.2 避免将密码存储在易于访问的位置。考虑存储密码的加密哈希，以替代纯文本格式存储。            |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 3.3 所有敏感数据都通过HTTP消息正文发送到服务器（即，URL参数从不用于发送敏感数据）。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.3 所有敏感数据都通过HTTP消息正文发送到服务器（即，URL参数从不用于发送敏感数据）。            |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 3.4 默认情况下，不能直接读取数据主体的个人数据。如有必要，提供一个接口以获取数据主体的授权。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.4 默认情况下，不能直接读取数据主体的个人数据，如有必要，提供一个接口以获取数据主体的授权。<br>注意：个人数据属于数据主体。如果需要访问和收集个人数据，则需要数据主体的同意和授权          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 3.5 默认情况下，在应用程序处理期间生成的数据无法传输给第三方。如有必要，提供一个接口以获取数据主体的授权。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.5 默认情况下，在应用程序处理期间生成的数据无法传输给第三方。如有必要，提供一个接口以获取数据主体的授权。<br>注意：在将数据主体的个人数据传输给第三方之前，请提供一个合理的方法，以通知数据主体有关要传输的个人数据的类型，传输目的和有关数据接受者的信息，并征得数据主体同意          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 3.6 如果需要将个人数据用于市场营销，用户配置文件和市场调查，则提供一个接口以获取数据主体的授权，并提供一个接口以供数据主体随时撤消其授权。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 3.6 如果需要将个人数据用于市场营销，用户配置文件和市场调查，则提供一个接口以获取数据主体的授权，并提供一个接口以供数据主体随时撤消其授权          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则4 加密算法和密钥管理
### 4.1 请勿使用专有和非标准的加密算法。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 4.1 请勿使用专有和非标准的加密算法          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 4.2 不要使用不安全的密码算法。建议使用强密码算法。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 4.2 不要使用不安全的密码算法。建议使用强密码算法          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 4.3 用于加密数据的密钥不能进行硬编码。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 4.3 用于加密数据的密钥不能进行硬编码          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 4.4 为了安全起见，请使用加密安全的随机数。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 4.4 为了安全起见，请使用加密安全的随机数          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 4.5 使用安全的随机数生成器生成密钥。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 4.5 使用安全的随机数生成器生成密钥          |
| 实施细节   | **代填**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则5 DOS攻击
### 5.1 必须具备反自动化功能，以防止违反凭据测试，暴力破解和帐户锁定攻击。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 5.1 必须具备反自动化功能，以防止违反凭据测试，暴力破解和帐户锁定攻击         |
| 实施细节   | **app/dev/mecm已具备反自动化登录验证（登录的滑块验证），未做防暴力破解和多次登录失败锁定功能，0.9版本增加账号锁定功能**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 5.2 应用程序必须限制活动的并发会话数。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 5.2 应用程序必须限制活动的并发会话数。          |
| 实施细节   | **app/dev/mecm未做并发会话数的限定，考虑user框架是否可以限制并发会话数**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 5.3 所有输入必须限制在适当的大小限制内。。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 5.3 所有输入必须限制在适当的大小限制内。          |
| 实施细节   | **接口入参有长度校验，未做body体的长度限制；上传文件：防zip炸弹已经满足，文件大小限制最大xMB，按照业务对文件类型已经校验，文件名格式已校验，mecm模块待分析**  |
| 相关API          |例1：appstore上传app包（post: /mec/appstore/v1/apps） |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        post: /mec-appstore/mec/appstore/v1/apps/?userId={userId}&userName={userName}                   |
| GUI测试步骤      | 1.登录日构建或者周构建的appstore环境<br>2.在AppStore首页，点击上传按钮<br>3.上传小于200M的csar包，填写其他符合格式参数（可以随便填写，检查参数长度限制），点击确认按钮<br>4.上传成功（如果参数长度太长或者太短，上传失败）|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则6 会话管理
### 6.1 验证用户身份，否则，用于建立新的用户会话。在不使任何现有会话标识符无效的情况下，攻击者就有机会窃取经过身份验证的会话。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 6.1 验证用户身份，否则，用于建立新的用户会话。在不使任何现有会话标识符无效的情况下，攻击者就有机会窃取经过身份验证的会话<br>注意：在授权新的用户会话之前，请使所有现有的会话标识符无效        |
| 实施细节   | **当前app/dev/mecm模块暂不支持，需要确认是否支持，以及限制用户多点登录，mecm模块待分析**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 6.2 将会话/凭证设置为有效的到期日期。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 6.2 将会话/凭证设置为有效的到期日期        |
| 实施细节   | **app/dev/mecm各模块的会话中jwt的token中设置了有效时间，但是缺少会话续命机制，mecm模块待分析**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 6.3 保护应用程序的会话免受信息泄漏。确保会话的数据未被其他会话使用或不可见。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 6.3 保护应用程序的会话免受信息泄漏。确保会话的数据未被其他会话使用或不可见        |
| 实施细节   | **app/dev/mecm各模块均不涉及**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 6.4 保护应用程序的会话免受信息泄漏。确保会话的数据未被其他会话使用或不可见。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 6.4 用户注销时，会话必须无效        |
| 实施细节   | **app/dev/mecm各模块用户注销后，session被清空，结束会话。用户可以获取到jwt token，但是后台接口未直接暴露给client，所以也不能通过接口访问数据；**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 6.5 成功的身份验证和重新身份验证必须生成新的会话和会话ID。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 6.5 成功的身份验证和重新身份验证必须生成新的会话和会话ID        |
| 实施细节   | **app/dev/mecm各模块在首次登录和重新登录均会生成新的会话和会话ID**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则7 Web服务安全性
### 7.1 客户端和服务器之间必须具有相同的编码样式。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 7.1 客户端和服务器之间必须具有相同的编码样式。<br>注意：客户端和服务器之间的不同编码可能会带来安全隐患，并且过去已用于绕过验证和WAF来执行XSS攻击        |
| 实施细节   | **需要和user/dev/user/mecm各模块负责人确认**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 7.2 必须接受XML或JSON模式，并在接受输入之前对其进行验证。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 7.2 必须接受XML或JSON模式，并在接受输入之前对其进行验证。       |
| 实施细节   | **目前user/app/dev各模块接口只支持JSON模块，需要确认是否对其输入格式做了校验，mecm模块待分析**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则8 安全文件
### 8.1 所有公共功能接口，RESTful接口，本地功能接口，命令行接口以及用于身份验证的默认用户名和密码都必须在产品或应用程序文档中进行描述。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 8.1 所有公共功能接口，RESTful接口，本地功能接口，命令行接口以及用于身份验证的默认用户名和密码都必须在产品或应用程序文档中进行描述。<br>注意：必须在应用文档中描述所有前面的新接口，以帮助用户更好地理解相应的模块。        |
| 实施细节   | **user/app/dev/mecm各模块需提供api接口文档**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 8.2 外部通讯连接对于系统运行和维护是必需的。必须在端口矩阵文档中描述所有使用的通信端口。动态监听端口必须限制在适当的范围内。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 8.2 外部通讯连接对于系统运行和维护是必需的。必须在端口矩阵文档中描述所有使用的通信端口。动态监听端口必须限制在适当的范围内。<br>注意：如果端口矩阵文档中未描述外部通信端口，则可能会影响用户安全配置。       |
| 实施细节   | **user/app/dev/mecm各模块需提供通讯矩阵**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
##规则9 日志安全
### 9.1 请勿记录未经消毒的用户输入。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 9.1 请勿记录未经消毒的用户输入。<br>注意：未经消毒的日志记录可以使攻击者伪造日志条目或将恶意内容注入日志。        |
| 实施细节   | **待排查user/app/dev的日志记录中是否有未经消毒的用户输入**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 9.2 足够的日志记录。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 9.2 足够的日志记录。<br>注意：确保记录所有与安全性相关的成功和失败。如果没有正确记录关键安全事件，例如登录尝试失败，这将使恶意行为更难以检测，并且可能会阻止攻击成功后的取证分析。      |
| 实施细节   | **user/app/dev中所有接口，均有日志记录，需要在日志记录中增加访问的客户端IP，mecm模块待分析**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 9.3 请勿在日志或日志文件中添加敏感信息。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 9.3 请勿在日志或日志文件中添加敏感信息。<br>注意：认真考虑写入日志文件的信息的敏感性。不要将机密信息写入日志文件。在将应用程序部署到生产环境之前，请删除调试日志文件。保护日志文件免遭未经授权的读取/写入。      |
| 实施细节   | **待排查user/app/dev/mecm各模块的日志记录中是否含有密码、密钥、session、token等敏感信息**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |
### 9.4 避免记录过多的数据。

| 内容                | 相关信息                                      |
| ----------------------- | ------------------------------------------------------------ |
| 安全设计规则编号 | 9.4 避免记录过多的数据。<br>注意：禁止大量重复的日志消息，并用定期摘要替换它们。例如，syslog可能包含一个条目，该条目在记录重复事件时声明“最后消息重复X次”。支持可以由管理员控制的日志文件的最大大小。      |
| 实施细节   | **user/app/dev均已实现配置单个日志文件20MB，最多50个，文件权限600，mecm模块待分析**  |
| 相关API          |不涉及 |
| API有效负载示例     | 不涉及|
| 相关文件           | 不涉及 |
| 相关GUI URL        |        不涉及                   |
| GUI测试步骤      | 不涉及|
| GUI输入示例       |     不涉及        |
| 附加信息         | 不涉及 |